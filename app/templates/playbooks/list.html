{% extends "base.html" %}

{% block title %}Playbooks - Policies{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/playbooks.css') }}">
{% endblock %}

{% macro policy_row(policy) %}
<div class="policy-row">
    <div class="policy-cell policy-name">{{ policy.name }}</div>
    <div class="policy-cell policy-tool-count">{{ policy.tool_count }}</div>
    <div class="policy-cell policy-rules">{{ policy.rules }}</div>
    <div class="policy-cell policy-actions">
        <button class="edit-btn" title="Edit Policy">✏️</button>
        <button class="run-btn" title="Run Policy">▶️</button>
    </div>
</div>
{% endmacro %}

{% block content %}
<div class="main-pane-header">
    <h1>Playbooks</h1>
    <div class="actions">
        <button class="new-policy-btn">New Policy ▼</button>
        <button class="import-btn">Import</button>
        <button class="export-btn">Export</button>
    </div>
</div>

<div class="policy-table-header">
    <div>Policy Name</div>
    <div>Tool Count</div>
    <div>Rules</div>
    <div>Actions</div>
</div>

<div class="policy-table">
    {% for policy in policies %}
        {{ policy_row(policy) }}
    {% else %}
        <p>No policies found.</p>
    {% endfor %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/playbooks.js') }}"></script>
{% endblock %}
