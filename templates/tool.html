{% extends "base.html" %}

{% block title %}{{ tool.name }} - Security Toolkit{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tool.css') }}">
{% endblock %}

{% block content %}
<div class="tool-page-flex">
    <div class="tool-main-card">
        <h2 class="tool-title"><i class="fas fa-terminal me-2"></i>{{ tool.name }}</h2>
        <p class="tool-desc">{{ tool.description }}</p>
        <form id="toolForm" class="tool-form">
            <input type="hidden" name="tool_id" value="{{ tool_id }}">
            <div class="form-group">
                <label for="target">Target</label>
                <input type="text" id="target" name="target" placeholder="Enter target (IP, URL, hostname, etc.)" required>
                <div class="form-text">{{ tool.help_text }}</div>
            </div>
            <div class="form-group">
                <label for="options">Options</label>
                <input type="text" id="options" name="options" placeholder="Additional options" value="{{ tool.default_options or '' }}">
                <div class="form-text">Leave blank to use default options or add your own custom parameters</div>
            </div>
            <button type="submit" class="signin-button tool-run-btn" id="runBtn">
                <i class="fas fa-play me-2"></i>Run {{ tool.name }}
            </button>
        </form>
        <div id="resultsSection" class="tool-results-card d-none">
            <h3 class="tool-title"><i class="fas fa-file-alt me-2"></i>Execution Results</h3>
            <div class="tool-status-row">
                <span><strong>Status:</strong> <span id="taskStatus" class="task-status-badge status-running">Running</span></span>
                <span><strong>Task ID:</strong> <span id="taskId"></span></span>
            </div>
            <div class="terminal tool-terminal" id="outputTerminal">Initializing {{ tool.name }}...</div>
            <div class="tool-actions">
                <button id="stopBtn" class="btn-secondary btn-danger-themed tool-stop-btn"><i class="fas fa-stop me-1"></i>Stop</button>
                <button id="viewDetailsBtn" class="btn-secondary tool-details-btn"><i class="fas fa-external-link-alt me-1"></i>View Full Details</button>
            </div>
        </div>
    </div>
    <div class="tool-sidebar">
        <div class="tool-info-card">
            <h3 class="tool-title"><i class="fas fa-info-circle me-2"></i>Tool Information</h3>
            <dl>
                <dt>Name</dt>
                <dd>{{ tool.name }}</dd>
                <dt>Command</dt>
                <dd><code>{{ tool.command }}</code></dd>
                <dt>Default Options</dt>
                <dd><code>{{ tool.default_options or '' }}</code></dd>
            </dl>
        </div>
        <div class="tool-info-card">
            <h3 class="tool-title"><i class="fas fa-history me-2"></i>Recent Tasks</h3>
            <div id="recentTasksSection">
                <p class="text-center text-muted">No recent tasks</p>
            </div>
            <div style="text-align:center;margin-top:1rem;">
                <a href="{{ url_for('list_tasks') }}" class="signin-button btn-small">View All Tasks <i class="fas fa-arrow-right ms-1"></i></a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// (Keep your AJAX and polling JS here, but use your classes for UI updates)
</script>
{% endblock %} 